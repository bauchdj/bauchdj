---
import { PATHS } from "const";
import { Icon } from "astro-icon/components";
---

<a href={PATHS.home} class="sm:hidden" aria-label="Back to the homepage">
    <Icon name="logo-dark-small" class="logo-dark" height={28} />
    <Icon name="logo-light-small" class="logo-light" height={28} />
</a>
<a href={PATHS.home} class="hidden sm:block" aria-label="Back to the homepage">
    <Icon name="logo-dark" class="logo-dark" height={28} />
    <Icon name="logo-light" class="logo-light" height={28} />
</a>

<script>
    import { isDarkMode } from "@helpers/style";

    const setImageSrc = () => {
        const logoDark = document.querySelectorAll<HTMLImageElement>(".logo-dark");
        const logoLight = document.querySelectorAll<HTMLImageElement>(".logo-light");

        if (isDarkMode()) {
            logoDark.forEach((el) => el.style.setProperty("display", "none"));
            logoLight.forEach((el) => el.style.setProperty("display", "block"));
        } else {
            logoDark.forEach((el) => el.style.setProperty("display", "block"));
            logoLight.forEach((el) => el.style.setProperty("display", "none"));
        }
    };

    document.addEventListener("astro:page-load", () => {
        setImageSrc();
    });

    window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
        setImageSrc();
    });
</script>
